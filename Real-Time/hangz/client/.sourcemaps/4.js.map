{"version":3,"sources":["../../src/pages/chat/chat.module.ts","../../src/pages/chat/chat.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACd;AAUlC;IAAA;IAA6B,CAAC;IAAjB,cAAc;QAR1B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,uDAAQ;aACT;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;aACnC;SACF,CAAC;OACW,cAAc,CAAG;IAAD,qBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;ACZsC;AACe;AACvB;AACA;AACA;AAOzD;IAUE,kBACU,QAAuB,EACvB,aAA2B,EAC3B,aAA2B,EAC3B,aAA2B,EAC3B,YAA+B;QAJ/B,aAAQ,GAAR,QAAQ,CAAe;QACvB,kBAAa,GAAb,aAAa,CAAc;QAC3B,kBAAa,GAAb,aAAa,CAAc;QAC3B,kBAAa,GAAb,aAAa,CAAc;QAC3B,iBAAY,GAAZ,YAAY,CAAmB;QAVlC,UAAK,GAAa,EAAE,CAAC;QACrB,YAAO,GAAW,EAAE,CAAC;IAUxB,CAAC;IAEL,iCAAc,GAAd;QAAA,iBA6BC;QA5BC,IAAI,CAAC,cAAc,EAAE,CAAC;QAEtB,IAAI,CAAC,aAAa,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,UAAC,GAAG;YAC3C,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YAEvB,KAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;YAC1B,KAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,UAAC,KAAK;gBAC5C,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC;gBACnB,EAAE,EAAC,KAAI,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC;wBACd,MAAM,EAAE,aAAa;wBACrB,OAAO,EAAE,sEAAsE;qBAChF,CAAC,CAAC;gBACL,CAAC;YACH,CAAC,CAAC,CAAC;QAEL,CAAC,EAAE,UAAC,GAAG;YACL,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACvB,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gBAAgB,GAAG,IAAI,gBAAgB,CAAC,UAAC,SAAS;YACrD,KAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;YACzD,SAAS,EAAE,IAAI;SAChB,CAAC,CAAC;IACL,CAAC;IAED,+BAAY,GAAZ;QACE,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;IACpC,CAAC;IAED,0BAAO,GAAP;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5B,IAAI,GAAG,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAClC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC;gBACzB,OAAO,EAAE,IAAI,CAAC,OAAO;gBACrB,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO;gBAC9C,WAAW,EAAE,GAAG;aACjB,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QACpB,CAAC;IACH,CAAC;IAED,mCAAgB,GAAhB;QACE,MAAM,CAAC,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;IAClC,CAAC;IAED,yBAAM,GAAN;QACE,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC;IAC9B,CAAC;IAED,iCAAc,GAAd;QACE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;YACtC,OAAO,EAAE,mBAAmB;SAC7B,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IACzB,CAAC;IA7EmB;QAAnB,yEAAS,CAAC,8DAAO,CAAC;kCAAc,8DAAO;iDAAC;IACJ;QAApC,yEAAS,CAAC,2DAAI,EAAE,EAAC,IAAI,EAAE,iEAAU,EAAC,CAAC;kCAAW,iEAAU;8CAAC;IAH/C,QAAQ;QAJpB,wEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;WACG;SACzB,CAAC;uFAYiC;YACR,0EAAY;YACZ,0EAAY;YACZ,wEAAY;YACb,KAAiB;OAf9B,QAAQ,CAgFpB;IAAD,CAAC;AAAA;SAhFY,QAAQ,e","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ChatPage } from './chat';\n\n@NgModule({\n  declarations: [\n    ChatPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ChatPage),\n  ],\n})\nexport class ChatPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.module.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { NavController, IonicPage, LoadingController, Content, List } from 'ionic-angular';\nimport { ChatProvider } from '../../providers/chat/chat';\nimport { UserProvider } from '../../providers/user/user';\nimport { AuthProvider } from '../../providers/auth/auth';\n\n@IonicPage()\n@Component({\n  selector: 'page-chat',\n  templateUrl: 'chat.html'\n})\nexport class ChatPage {\n\n  @ViewChild(Content) contentArea: Content;\n  @ViewChild(List, {read: ElementRef}) chatList: ElementRef;\n\n  public chats: Object[] = [];\n  public message: string = '';\n  public loading: any;\n  public mutationObserver: any;\n\n  constructor(\n    private _navCtrl: NavController,\n    private _chatProvider: ChatProvider,\n    private _userProvider: UserProvider,\n    private _authProvider: AuthProvider,\n    private _loadingCtrl: LoadingController\n  ) { }\n\n  ionViewDidLoad() {\n    this.presentLoading();\n\n    this._authProvider.reauthenticate().then((res) => {\n      this.loading.dismiss();\n\n      this._chatProvider.init();\n      this._chatProvider.getChats().subscribe((chats) => {\n        this.chats = chats;\n        if(this.chats.length === 0) {\n          this.chats.push({\n            author: 'Hangz Admin',\n            message: 'Looks like nobody is around. Type a message below to start chatting!',\n          });\n        }\n      });\n\n    }, (err) => {\n      this.loading.dismiss();\n      this._navCtrl.setRoot('LoginPage');\n    });\n\n    this.mutationObserver = new MutationObserver((mutations) => {\n      this.newChatAdded();\n    });\n\n    this.mutationObserver.observe(this.chatList.nativeElement, {\n      childList: true\n    });\n  }\n\n  newChatAdded(): void {\n    this.contentArea.scrollToBottom();\n  }\n\n  addChat(): void {\n    if (this.message.length > 0) {\n      let iso = this.getDateIsoString();\n      this._chatProvider.addChat({\n        message: this.message,\n        author: this._userProvider.currentUser.user_id,\n        dateCreated: iso\n      });\n      this.message = '';\n    }\n  }\n\n  getDateIsoString(): string {\n    return new Date().toISOString();\n  }\n\n  logout(): void {\n    this._authProvider.logout();\n  }\n\n  presentLoading(): void {\n    this.loading = this._loadingCtrl.create({\n      content: 'Authenticating...'\n    });\n\n    this.loading.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.ts"],"sourceRoot":""}